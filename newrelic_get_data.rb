require 'net/http'
require 'json'
require 'time'
require 'aws-record'
require 'aws-sdk-resources'


def newrelic_request()
  # todo date frame
  # todo app ID - ENV['NR_APP_ID_xxx_name']?
  uri = URI('https://api.newrelic.com/v2/applications/todo/metrics/data.json?names[]=WebTransaction&names[]=Errors%2Fall&from=2020-03-09T00:00Z&to=2020-03-09T11:49Z')
  req = Net::HTTP::Get.new(uri)
  req.add_field 'X-Api-Key', ENV['NR_API_KEY']

  res = Net::HTTP.start(uri.hostname, uri.port, use_ssl: uri.scheme == 'https') do |http|
    http.request(req)
  end

  case res
  when Net::HTTPSuccess then
    JSON.parse(res.body)
  else
    puts 'error'
    raise res.body
  end
end

def newrelic_debug
  JSON.parse '{"metric_data":{"from":"2020-03-09T00:00:00+00:00","to":"2020-03-09T11:49:00+00:00","metrics_not_found":[],"metrics_found":["WebTransaction","Errors/all"],"metrics":[{"name":"WebTransaction","timeslices":[{"from":"2020-03-09T00:04:00+00:00","to":"2020-03-09T00:09:00+00:00","values":{"average_call_time":309,"average_response_time":309,"requests_per_minute":1140,"call_count":5702,"min_call_time":1.18,"max_call_time":6100,"total_call_time":1760000,"throughput":19.0,"standard_deviation":297}},{"from":"2020-03-09T00:09:00+00:00","to":"2020-03-09T00:14:00+00:00","values":{"average_call_time":298,"average_response_time":298,"requests_per_minute":1120,"call_count":5609,"min_call_time":1.29,"max_call_time":4720,"total_call_time":1670000,"throughput":18.7,"standard_deviation":296}},{"from":"2020-03-09T00:14:00+00:00","to":"2020-03-09T00:19:00+00:00","values":{"average_call_time":293,"average_response_time":293,"requests_per_minute":1020,"call_count":5089,"min_call_time":1.13,"max_call_time":35600,"total_call_time":1490000,"throughput":17.0,"standard_deviation":571}},{"from":"2020-03-09T00:19:00+00:00","to":"2020-03-09T00:24:00+00:00","values":{"average_call_time":272,"average_response_time":272,"requests_per_minute":921,"call_count":4607,"min_call_time":1.13,"max_call_time":12400,"total_call_time":1250000,"throughput":15.4,"standard_deviation":337}},{"from":"2020-03-09T00:24:00+00:00","to":"2020-03-09T00:29:00+00:00","values":{"average_call_time":281,"average_response_time":281,"requests_per_minute":1040,"call_count":5182,"min_call_time":1.12,"max_call_time":4590,"total_call_time":1460000,"throughput":17.3,"standard_deviation":266}},{"from":"2020-03-09T00:29:00+00:00","to":"2020-03-09T00:34:00+00:00","values":{"average_call_time":282,"average_response_time":282,"requests_per_minute":988,"call_count":4942,"min_call_time":1.11,"max_call_time":2890,"total_call_time":1390000,"throughput":16.5,"standard_deviation":261}},{"from":"2020-03-09T00:34:00+00:00","to":"2020-03-09T00:39:00+00:00","values":{"average_call_time":257,"average_response_time":257,"requests_per_minute":951,"call_count":4755,"min_call_time":1.19,"max_call_time":2330,"total_call_time":1220000,"throughput":15.9,"standard_deviation":238}},{"from":"2020-03-09T00:39:00+00:00","to":"2020-03-09T00:44:00+00:00","values":{"average_call_time":249,"average_response_time":249,"requests_per_minute":1680,"call_count":8388,"min_call_time":1.09,"max_call_time":2280,"total_call_time":2090000,"throughput":28.0,"standard_deviation":191}},{"from":"2020-03-09T00:44:00+00:00","to":"2020-03-09T00:49:00+00:00","values":{"average_call_time":250,"average_response_time":250,"requests_per_minute":1840,"call_count":9198,"min_call_time":1.15,"max_call_time":2400,"total_call_time":2300000,"throughput":30.7,"standard_deviation":188}},{"from":"2020-03-09T00:49:00+00:00","to":"2020-03-09T00:54:00+00:00","values":{"average_call_time":241,"average_response_time":241,"requests_per_minute":1790,"call_count":8954,"min_call_time":1.19,"max_call_time":2980,"total_call_time":2160000,"throughput":29.8,"standard_deviation":184}},{"from":"2020-03-09T00:54:00+00:00","to":"2020-03-09T00:59:00+00:00","values":{"average_call_time":231,"average_response_time":231,"requests_per_minute":1820,"call_count":9098,"min_call_time":1.03,"max_call_time":2980,"total_call_time":2100000,"throughput":30.3,"standard_deviation":172}},{"from":"2020-03-09T00:59:00+00:00","to":"2020-03-09T01:04:00+00:00","values":{"average_call_time":241,"average_response_time":241,"requests_per_minute":1730,"call_count":8632,"min_call_time":1.28,"max_call_time":4310,"total_call_time":2080000,"throughput":28.8,"standard_deviation":191}},{"from":"2020-03-09T01:04:00+00:00","to":"2020-03-09T01:09:00+00:00","values":{"average_call_time":253,"average_response_time":253,"requests_per_minute":1790,"call_count":8950,"min_call_time":1.24,"max_call_time":12600,"total_call_time":2260000,"throughput":29.8,"standard_deviation":231}},{"from":"2020-03-09T01:09:00+00:00","to":"2020-03-09T01:14:00+00:00","values":{"average_call_time":274,"average_response_time":274,"requests_per_minute":1920,"call_count":9617,"min_call_time":1.2,"max_call_time":2760,"total_call_time":2630000,"throughput":32.1,"standard_deviation":209}},{"from":"2020-03-09T01:14:00+00:00","to":"2020-03-09T01:19:00+00:00","values":{"average_call_time":285,"average_response_time":285,"requests_per_minute":2000,"call_count":10022,"min_call_time":1.27,"max_call_time":45500,"total_call_time":2850000,"throughput":33.4,"standard_deviation":626}},{"from":"2020-03-09T01:19:00+00:00","to":"2020-03-09T01:24:00+00:00","values":{"average_call_time":260,"average_response_time":260,"requests_per_minute":1850,"call_count":9267,"min_call_time":1.18,"max_call_time":5160,"total_call_time":2410000,"throughput":30.9,"standard_deviation":202}},{"from":"2020-03-09T01:24:00+00:00","to":"2020-03-09T01:29:00+00:00","values":{"average_call_time":257,"average_response_time":257,"requests_per_minute":1800,"call_count":8984,"min_call_time":1.22,"max_call_time":5160,"total_call_time":2310000,"throughput":29.9,"standard_deviation":201}},{"from":"2020-03-09T01:29:00+00:00","to":"2020-03-09T01:34:00+00:00","values":{"average_call_time":253,"average_response_time":253,"requests_per_minute":1730,"call_count":8632,"min_call_time":1.18,"max_call_time":1900,"total_call_time":2180000,"throughput":28.8,"standard_deviation":188}},{"from":"2020-03-09T01:34:00+00:00","to":"2020-03-09T01:39:00+00:00","values":{"average_call_time":252,"average_response_time":252,"requests_per_minute":1720,"call_count":8597,"min_call_time":1.26,"max_call_time":2850,"total_call_time":2170000,"throughput":28.7,"standard_deviation":189}},{"from":"2020-03-09T01:39:00+00:00","to":"2020-03-09T01:44:00+00:00","values":{"average_call_time":257,"average_response_time":257,"requests_per_minute":1740,"call_count":8714,"min_call_time":1.13,"max_call_time":13600,"total_call_time":2240000,"throughput":29.0,"standard_deviation":248}},{"from":"2020-03-09T01:44:00+00:00","to":"2020-03-09T01:49:00+00:00","values":{"average_call_time":236,"average_response_time":236,"requests_per_minute":1050,"call_count":5227,"min_call_time":1.21,"max_call_time":3070,"total_call_time":1240000,"throughput":17.4,"standard_deviation":212}},{"from":"2020-03-09T01:49:00+00:00","to":"2020-03-09T01:54:00+00:00","values":{"average_call_time":248,"average_response_time":248,"requests_per_minute":987,"call_count":4937,"min_call_time":1.03,"max_call_time":2710,"total_call_time":1230000,"throughput":16.5,"standard_deviation":229}},{"from":"2020-03-09T01:54:00+00:00","to":"2020-03-09T01:59:00+00:00","values":{"average_call_time":262,"average_response_time":262,"requests_per_minute":1560,"call_count":7807,"min_call_time":1.17,"max_call_time":2880,"total_call_time":2050000,"throughput":26.0,"standard_deviation":214}},{"from":"2020-03-09T01:59:00+00:00","to":"2020-03-09T02:04:00+00:00","values":{"average_call_time":272,"average_response_time":272,"requests_per_minute":1550,"call_count":7746,"min_call_time":1.17,"max_call_time":3190,"total_call_time":2110000,"throughput":25.8,"standard_deviation":221}},{"from":"2020-03-09T02:04:00+00:00","to":"2020-03-09T02:09:00+00:00","values":{"average_call_time":251,"average_response_time":251,"requests_per_minute":1050,"call_count":5246,"min_call_time":1.04,"max_call_time":1560,"total_call_time":1320000,"throughput":17.5,"standard_deviation":211}},{"from":"2020-03-09T02:09:00+00:00","to":"2020-03-09T02:14:00+00:00", "values":{"average_call_time":244,"average_response_time":244,"requests_per_minute":1340,"call_count":6704,"min_call_time":1.16,"max_call_time":2580,"total_call_time":1640000,"throughput":22.3,"standard_deviation":206}},{"from":"2020-03-09T02:14:00+00:00","to":"2020-03-09T02:19:00+00:00","values":{"average_call_time":265,"average_response_time":265,"requests_per_minute":857,"call_count":4286,"min_call_time":1.24,"max_call_time":32500,"total_call_time":1130000,"throughput":14.3,"standard_deviation":570}},{"from":"2020-03-09T02:19:00+00:00","to":"2020-03-09T02:24:00+00:00","values":{"average_call_time":242,"average_response_time":242,"requests_per_minute":854,"call_count":4269,"min_call_time":1.17,"max_call_time":1610,"total_call_time":1040000,"throughput":14.2,"standard_deviation":224}},{"from":"2020-03-09T02:24:00+00:00","to":"2020-03-09T02:29:00+00:00","values":{"average_call_time":251,"average_response_time":251,"requests_per_minute":872,"call_count":4362,"min_call_time":1.16,"max_call_time":7510,"total_call_time":1100000,"throughput":14.5,"standard_deviation":253}},{"from":"2020-03-09T02:29:00+00:00","to":"2020-03-09T02:34:00+00:00","values":{"average_call_time":255,"average_response_time":255,"requests_per_minute":832,"call_count":4158,"min_call_time":1.18,"max_call_time":3220,"total_call_time":1060000,"throughput":13.9,"standard_deviation":242}},{"from":"2020-03-09T02:34:00+00:00","to":"2020-03-09T02:39:00+00:00","values":{"average_call_time":263,"average_response_time":263,"requests_per_minute":792,"call_count":3958,"min_call_time":1.09,"max_call_time":1980,"total_call_time":1040000,"throughput":13.2,"standard_deviation":253}},{"from":"2020-03-09T02:39:00+00:00","to":"2020-03-09T02:44:00+00:00","values":{"average_call_time":266,"average_response_time":266,"requests_per_minute":890,"call_count":4452,"min_call_time":1.11,"max_call_time":2410,"total_call_time":1190000,"throughput":14.8,"standard_deviation":260}},{"from":"2020-03-09T02:44:00+00:00","to":"2020-03-09T02:49:00+00:00","values":{"average_call_time":258,"average_response_time":258,"requests_per_minute":936,"call_count":4682,"min_call_time":1.12,"max_call_time":2690,"total_call_time":1210000,"throughput":15.6,"standard_deviation":254}},{"from":"2020-03-09T02:49:00+00:00","to":"2020-03-09T02:54:00+00:00","values":{"average_call_time":256,"average_response_time":256,"requests_per_minute":850,"call_count":4252,"min_call_time":1.15,"max_call_time":2250,"total_call_time":1090000,"throughput":14.2,"standard_deviation":252}},{"from":"2020-03-09T02:54:00+00:00","to":"2020-03-09T02:59:00+00:00","values":{"average_call_time":284,"average_response_time":284,"requests_per_minute":989,"call_count":4946,"min_call_time":1.18,"max_call_time":4310,"total_call_time":1400000,"throughput":16.5,"standard_deviation":284}},{"from":"2020-03-09T02:59:00+00:00","to":"2020-03-09T03:04:00+00:00","values":{"average_call_time":294,"average_response_time":294,"requests_per_minute":1170,"call_count":5873,"min_call_time":1.15,"max_call_time":7630,"total_call_time":1730000,"throughput":19.6,"standard_deviation":265}},{"from":"2020-03-09T03:04:00+00:00","to":"2020-03-09T03:09:00+00:00","values":{"average_call_time":294,"average_response_time":294,"requests_per_minute":1050,"call_count":5233,"min_call_time":1.1,"max_call_time":7630,"total_call_time":1540000,"throughput":17.4,"standard_deviation":286}},{"from":"2020-03-09T03:09:00+00:00","to":"2020-03-09T03:14:00+00:00","values":{"average_call_time":283,"average_response_time":283,"requests_per_minute":1060,"call_count":5321,"min_call_time":1.07,"max_call_time":5710,"total_call_time":1500000,"throughput":17.7,"standard_deviation":276}},{"from":"2020-03-09T03:14:00+00:00","to":"2020-03-09T03:19:00+00:00","values":{"average_call_time":264,"average_response_time":264,"requests_per_minute":1180,"call_count":5913,"min_call_time":1.31,"max_call_time":27100,"total_call_time":1560000,"throughput":19.7,"standard_deviation":425}},{"from":"2020-03-09T03:19:00+00:00","to":"2020-03-09T03:24:00+00:00","values":{"average_call_time":254,"average_response_time":254,"requests_per_minute":1090,"call_count":5426,"min_call_time":1.11,"max_call_time":2870,"total_call_time":1380000,"throughput":18.1,"standard_deviation":242}},{"from":"2020-03-09T03:24:00+00:00","to":"2020-03-09T03:29:00+00:00","values":{"average_call_time":266,"average_response_time":266,"requests_per_minute":965,"call_count":4827,"min_call_time":1.14,"max_call_time":4520,"total_call_time":1280000,"throughput":16.1,"standard_deviation":265}},{"from":"2020-03-09T03:29:00+00:00","to":"2020-03-09T03:34:00+00:00","values":{"average_call_time":254,"average_response_time":254,"requests_per_minute":1010,"call_count":5070,"min_call_time":1.07,"max_call_time":4470,"total_call_time":1290000,"throughput":16.9,"standard_deviation":256}},{"from":"2020-03-09T03:34:00+00:00","to":"2020-03-09T03:39:00+00:00","values":{"average_call_time":250,"average_response_time":250,"requests_per_minute":974,"call_count":4870,"min_call_time":1.08,"max_call_time":1830,"total_call_time":1220000,"throughput":16.2,"standard_deviation":232}},{"from":"2020-03-09T03:39:00+00:00","to":"2020-03-09T03:44:00+00:00","values":{"average_call_time":248,"average_response_time":248,"requests_per_minute":859,"call_count":4294,"min_call_time":1.06,"max_call_time":1920,"total_call_time":1060000,"throughput":14.3,"standard_deviation":239}},{"from":"2020-03-09T03:44:00+00:00","to":"2020-03-09T03:49:00+00:00","values":{"average_call_time":349,"average_response_time":349,"requests_per_minute":872,"call_count":4361,"min_call_time":1.07,"max_call_time":292000,"total_call_time":1520000,"throughput":14.5,"standard_deviation":4420}},{"from":"2020-03-09T03:49:00+00:00","to":"2020-03-09T03:54:00+00:00","values":{"average_call_time":293,"average_response_time":293,"requests_per_minute":882,"call_count":4408,"min_call_time":1.14,"max_call_time":4180,"total_call_time":1290000,"throughput":14.7,"standard_deviation":281}},{"from":"2020-03-09T03:54:00+00:00","to":"2020-03-09T03:59:00+00:00","values":{"average_call_time":292,"average_response_time":292,"requests_per_minute":994,"call_count":4969,"min_call_time":1.18,"max_call_time":4180,"total_call_time":1450000,"throughput":16.6,"standard_deviation":270}},{"from":"2020-03-09T03:59:00+00:00","to":"2020-03-09T04:04:00+00:00","values":{"average_call_time":281,"average_response_time":281,"requests_per_minute":1480,"call_count":7411,"min_call_time":1.3,"max_call_time":4730,"total_call_time":2080000,"throughput":24.7,"standard_deviation":235}},{"from":"2020-03-09T04:04:00+00:00","to":"2020-03-09T04:09:00+00:00","values":{"average_call_time":277,"average_response_time":277,"requests_per_minute":1500,"call_count":7517,"min_call_time":1.06,"max_call_time":4910,"total_call_time":2080000,"throughput":25.1,"standard_deviation":239}},{"from":"2020-03-09T04:09:00+00:00","to":"2020-03-09T04:14:00+00:00","values":{"average_call_time":245,"average_response_time":245,"requests_per_minute":1060,"call_count":5315,"min_call_time":1.09,"max_call_time":3900,"total_call_time":1300000,"throughput":17.7,"standard_deviation":210}},{"from":"2020-03-09T04:14:00+00:00","to":"2020-03-09T04:19:00+00:00","values":{"average_call_time":286,"average_response_time":286,"requests_per_minute":1220,"call_count":6082,"min_call_time":0.954,"max_call_time":18000,"total_call_time":1740000,"throughput":20.3,"standard_deviation":389}},{"from":"2020-03-09T04:19:00+00:00","to":"2020-03-09T04:24:00+00: 00","values":{"average_call_time":352,"average_response_time":352,"requests_per_minute":1350,"call_count":6749,"min_call_time":1.03,"max_call_time":4170,"total_call_time":2380000,"throughput":22.5,"standard_deviation":272}},{"from":"2020-03-09T04:24:00+00:00","to":"2020-03-09T04:29:00+00:00","values":{"average_call_time":255,"average_response_time":255,"requests_per_minute":1590,"call_count":7975,"min_call_time":1.0,"max_call_time":13400,"total_call_time":2030000,"throughput":26.6,"standard_deviation":286}},{"from":"2020-03-09T04:29:00+00:00","to":"2020-03-09T04:34:00+00:00","values":{"average_call_time":262,"average_response_time":262,"requests_per_minute":1250,"call_count":6258,"min_call_time":1.08,"max_call_time":1970,"total_call_time":1640000,"throughput":20.9,"standard_deviation":211}},{"from":"2020-03-09T04:34:00+00:00","to":"2020-03-09T04:39:00+00:00","values":{"average_call_time":234,"average_response_time":234,"requests_per_minute":857,"call_count":4283,"min_call_time":1.08,"max_call_time":3030,"total_call_time":1000000,"throughput":14.3,"standard_deviation":230}},{"from":"2020-03-09T04:39:00+00:00","to":"2020-03-09T04:44:00+00:00","values":{"average_call_time":261,"average_response_time":261,"requests_per_minute":1030,"call_count":5139,"min_call_time":1.08,"max_call_time":3030,"total_call_time":1340000,"throughput":17.1,"standard_deviation":235}},{"from":"2020-03-09T04:44:00+00:00","to":"2020-03-09T04:49:00+00:00","values":{"average_call_time":241,"average_response_time":241,"requests_per_minute":1010,"call_count":5072,"min_call_time":1.11,"max_call_time":11500,"total_call_time":1220000,"throughput":16.9,"standard_deviation":247}},{"from":"2020-03-09T04:49:00+00:00","to":"2020-03-09T04:54:00+00:00","values":{"average_call_time":272,"average_response_time":272,"requests_per_minute":1080,"call_count":5407,"min_call_time":1.05,"max_call_time":11500,"total_call_time":1470000,"throughput":18.0,"standard_deviation":273}},{"from":"2020-03-09T04:54:00+00:00","to":"2020-03-09T04:59:00+00:00","values":{"average_call_time":278,"average_response_time":278,"requests_per_minute":1180,"call_count":5903,"min_call_time":1.12,"max_call_time":7720,"total_call_time":1640000,"throughput":19.7,"standard_deviation":246}},{"from":"2020-03-09T04:59:00+00:00","to":"2020-03-09T05:04:00+00:00","values":{"average_call_time":273,"average_response_time":273,"requests_per_minute":2020,"call_count":10113,"min_call_time":1.17,"max_call_time":7720,"total_call_time":2760000,"throughput":33.7,"standard_deviation":207}},{"from":"2020-03-09T05:04:00+00:00","to":"2020-03-09T05:09:00+00:00","values":{"average_call_time":280,"average_response_time":280,"requests_per_minute":1720,"call_count":8576,"min_call_time":1.17,"max_call_time":2440,"total_call_time":2400000,"throughput":28.6,"standard_deviation":210}},{"from":"2020-03-09T05:09:00+00:00","to":"2020-03-09T05:14:00+00:00","values":{"average_call_time":208,"average_response_time":208,"requests_per_minute":1540,"call_count":7713,"min_call_time":1.15,"max_call_time":134000,"total_call_time":1600000,"throughput":25.7,"standard_deviation":1070}},{"from":"2020-03-09T05:14:00+00:00","to":"2020-03-09T05:19:00+00:00","values":{"average_call_time":219,"average_response_time":219,"requests_per_minute":1570,"call_count":7873,"min_call_time":1.1,"max_call_time":134000,"total_call_time":1720000,"throughput":26.2,"standard_deviation":1140}},{"from":"2020-03-09T05:19:00+00:00","to":"2020-03-09T05:24:00+00:00","values":{"average_call_time":206,"average_response_time":206,"requests_per_minute":1580,"call_count":7882,"min_call_time":1.1,"max_call_time":3230,"total_call_time":1620000,"throughput":26.3,"standard_deviation":238}},{"from":"2020-03-09T05:24:00+00:00","to":"2020-03-09T05:29:00+00:00","values":{"average_call_time":231,"average_response_time":231,"requests_per_minute":1100,"call_count":5521,"min_call_time":1.2,"max_call_time":5090,"total_call_time":1280000,"throughput":18.4,"standard_deviation":256}},{"from":"2020-03-09T05:29:00+00:00","to":"2020-03-09T05:34:00+00:00","values":{"average_call_time":252,"average_response_time":252,"requests_per_minute":1010,"call_count":5071,"min_call_time":1.13,"max_call_time":2760,"total_call_time":1280000,"throughput":16.9,"standard_deviation":231}},{"from":"2020-03-09T05:34:00+00:00","to":"2020-03-09T05:39:00+00:00","values":{"average_call_time":253,"average_response_time":253,"requests_per_minute":1020,"call_count":5102,"min_call_time":1.07,"max_call_time":2410,"total_call_time":1290000,"throughput":17.0,"standard_deviation":229}},{"from":"2020-03-09T05:39:00+00:00","to":"2020-03-09T05:44:00+00:00","values":{"average_call_time":253,"average_response_time":253,"requests_per_minute":998,"call_count":4991,"min_call_time":1.13,"max_call_time":2440,"total_call_time":1260000,"throughput":16.6,"standard_deviation":240}},{"from":"2020-03-09T05:44:00+00:00","to":"2020-03-09T05:49:00+00:00","values":{"average_call_time":265,"average_response_time":265,"requests_per_minute":1060,"call_count":5284,"min_call_time":1.15,"max_call_time":4000,"total_call_time":1400000,"throughput":17.6,"standard_deviation":246}},{"from":"2020-03-09T05:49:00+00:00","to":"2020-03-09T05:54:00+00:00","values":{"average_call_time":243,"average_response_time":243,"requests_per_minute":1060,"call_count":5325,"min_call_time":1.12,"max_call_time":3610,"total_call_time":1300000,"throughput":17.7,"standard_deviation":220}},{"from":"2020-03-09T05:54:00+00:00","to":"2020-03-09T05:59:00+00:00","values":{"average_call_time":259,"average_response_time":259,"requests_per_minute":1120,"call_count":5584,"min_call_time":1.08,"max_call_time":4600,"total_call_time":1450000,"throughput":18.6,"standard_deviation":243}},{"from":"2020-03-09T05:59:00+00:00","to":"2020-03-09T06:04:00+00:00","values":{"average_call_time":253,"average_response_time":253,"requests_per_minute":1150,"call_count":5732,"min_call_time":1.19,"max_call_time":2450,"total_call_time":1450000,"throughput":19.1,"standard_deviation":232}},{"from":"2020-03-09T06:04:00+00:00","to":"2020-03-09T06:09:00+00:00","values":{"average_call_time":202,"average_response_time":202,"requests_per_minute":1700,"call_count":8502,"min_call_time":1.13,"max_call_time":2510,"total_call_time":1710000,"throughput":28.3,"standard_deviation":206}},{"from":"2020-03-09T06:09:00+00:00","to":"2020-03-09T06:14:00+00:00","values":{"average_call_time":276,"average_response_time":276,"requests_per_minute":1130,"call_count":5651,"min_call_time":1.0,"max_call_time":12100,"total_call_time":1560000,"throughput":18.8,"standard_deviation":299}},{"from":"2020-03-09T06:14:00+00:00","to":"2020-03-09T06:19:00+00:00","values":{"average_call_time":279,"average_response_time":279,"requests_per_minute":1250,"call_count":6244,"min_call_time":1.08,"max_call_time":27700,"total_call_time":1740000,"throughput":20.8,"standard_deviation":454}},{"from":"2020-03-09T06:19:00+00:00","to":"2020-03-09T06:24:00+00:00","values":{"average_call_time":271,"average_response_time":271,"requests_per_minute":1310,"call_count":6547,"min_call_time":1.2,"max_call_time":3550,"total_call_time":1780000,"throughput":21.8,"standard_deviation":244}},{"from":"2020-03-09T06:24:00+00:00","to":"2020-03-09T06:29:00+00:00","values":{"average_call_time":265,"average_response_time":265,"requests_per_minute":1220,"call_count":6090,"min_call_time":0.968,"max_call_time":2460,"total_call_time":1610000,"throughput":20.3,"standard_deviation":240}},{"from":"2020-03-09T06:29:00+00:00","to":"2020-03-09T06:34:00+00:00","values":{"average_call_time":226,"average_response_time":226,"requests_per_minute":1410,"call_count":7038,"min_call_time":0.968,"max_call_time":4830,"total_call_time":1590000,"throughput":23.5,"standard_deviation":242}},{"from":"2020-03-09T06:34:00+00:00","to":"2020-03-09T06:39:00+00:00","values":{"average_call_time":278,"average_response_time":278,"requests_per_minute":1210,"call_count":6031,"min_call_time":1.06,"max_call_time":3300,"total_call_time":1680000,"throughput":20.1,"standard_deviation":242}},{"from":"2020-03-09T06:39:00+00:00","to":"2020-03-09T06:44:00+00:00","values":{"average_call_time":261,"average_response_time":261,"requests_per_minute":1370,"call_count":6857,"min_call_time":1.13,"max_call_time":5590,"total_call_time":1790000,"throughput":22.9,"standard_deviation":238}},{"from":"2020-03-09T06:44:00+00:00","to":"2020-03-09T06:49:00+00:00","values":{"average_call_time":274,"average_response_time":274,"requests_per_minute":1270,"call_count":6350,"min_call_time":1.1,"max_call_time":6230,"total_call_time":1740000,"throughput":21.2,"standard_deviation":263}},{"from":"2020-03-09T06:49:00+00:00","to":"2020-03-09T06:54:00+00:00","values":{"average_call_time":269,"average_response_time":269,"requests_per_minute":1220,"call_count":6104,"min_call_time":1.1,"max_call_time":2670,"total_call_time":1640000,"throughput":20.3,"standard_deviation":249}},{"from":"2020-03-09T06:54:00+00:00","to":"2020-03-09T06:59:00+00:00","values":{"average_call_time":272,"average_response_time":272,"requests_per_minute":1240,"call_count":6187,"min_call_time":1.02,"max_call_time":2330,"total_call_time":1680000,"throughput":20.6,"standard_deviation":250}},{"from":"2020-03-09T06:59:00+00:00","to":"2020-03-09T07:04:00+00:00","values":{"average_call_time":277,"average_response_time":277,"requests_per_minute":1300,"call_count":6522,"min_call_time":1.07,"max_call_time":9230,"total_call_time":1810000,"throughput":21.7,"standard_deviation":301}},{"from":"2020-03-09T07:04:00+00:00","to":"2020-03-09T07:09:00+00:00","values":{"average_call_time":290,"average_response_time":290,"requests_per_minute":1850,"call_count":9274,"min_call_time":1.11,"max_call_time":2890,"total_call_time":2690000,"throughput":30.9,"standard_deviation":239}},{"from":"2020-03-09T07:09:00+00:00","to":"2020-03-09T07:14:00+00:00","values":{"average_call_time":293,"average_response_time":293,"requests_per_minute":1860,"call_count":9321,"min_call_time":0.963,"max_call_time":4210,"total_call_time":2730000,"throughput":31.1,"standard_deviation":250}},{"from":"2020-03-09T07:14:00+00:00","to":"2020-03-09T07:19:00+00:00","values":{"average_call_time":294,"average_response_time":294,"requests_per_minute":1730,"call_count":8634,"min_call_time":1.07,"max_call_time":37600,"total_call_time":2540000,"throughput":28.8,"standard_deviation":474}},{"from":"2020-03-09T07:19:00+00:00","to":"2020-03-09T07:24:00+00:00","values":{"average_call_time":276,"average_response_time":276,"requests_per_minute":1630,"call_count":8158,"min_call_time":1.07,"max_call_time":3800,"total_call_time":2250000,"throughput":27.2,"standard_deviation":242}},{"from":"2020-03-09T07:24:00+00:00","to":"2020-03-09T07:29:00+00:00","values":{"average_call_time":290,"average_response_time":290,"requests_per_minute":2300,"call_count":11523,"min_call_time":1.07,"max_call_time":3510,"total_call_time":3340000,"throughput":38.4,"standard_deviation":231}},{"from":"2020-03-09T07:29:00+00:00","to":"2020-03-09T07:34:00+00:00","values":{"average_call_time":295,"average_response_time":295,"requests_per_minute":1580,"call_count":7919,"min_call_time":1.12,"max_call_time":4130,"total_call_time":2340000,"throughput":26.4,"standard_deviation":261}},{"from":"2020-03-09T07:34:00+00:00","to":"2020-03-09T07:39:00+00:00","values":{"average_call_time":304,"average_response_time":304,"requests_per_minute":1540,"call_count":7680,"min_call_time":1.1,"max_call_time":12800,"total_call_time":2330000,"throughput":25.6,"standard_deviation":309}},{"from":"2020-03-09T07:39:00+00:00","to":"2020-03-09T07:44:00+00:00","values":{"average_call_time":299,"average_response_time":299,"requests_per_minute":1550,"call_count":7746,"min_call_time":1.1,"max_call_time":10000,"total_call_time":2320000,"throughput":25.8,"standard_deviation":272}},{"from":"2020-03-09T07:44:00+00:00","to":"2020-03-09T07:49:00+00:00","values":{"average_call_time":296,"average_response_time":296,"requests_per_minute":1610,"call_count":8042,"min_call_time":1.17,"max_call_time":3480,"total_call_time":2380000,"throughput":26.8,"standard_deviation":258}},{"from":"2020-03-09T07:49:00+00:00","to":"2020-03-09T07:54:00+00:00","values":{"average_call_time":310,"average_response_time":310,"requests_per_minute":1530,"call_count":7675,"min_call_time":1.14,"max_call_time":5930,"total_call_time":2380000,"throughput":25.6,"standard_deviation":271}},{"from":"2020-03-09T07:54:00+00:00","to":"2020-03-09T07:59:00+00:00","values":{"average_call_time":311,"average_response_time":311,"requests_per_minute":1640,"call_count":8185,"min_call_time":1.12,"max_call_time":3100,"total_call_time":2550000,"throughput":27.3,"standard_deviation":261}},{"from":"2020-03-09T07:59:00+00:00","to":"2020-03-09T08:04:00+00:00","values":{"average_call_time":308,"average_response_time":308,"requests_per_minute":1710,"call_count":8555,"min_call_time":1.09,"max_call_time":11600,"total_call_time":2640000,"throughput":28.5,"standard_deviation":286}},{"from":"2020-03-09T08:04:00+00:00","to":"2020-03-09T08:09:00+00:00","values":{"average_call_time":316,"average_response_time":316,"requests_per_minute":1710,"call_count":8536,"min_call_time":1.06,"max_call_time":3770,"total_call_time":2700000,"throughput":28.5,"standard_deviation":265}},{"from":"2020-03-09T08:09:00+00:00","to":"2020-03-09T08:14:00+00:00","values":{"average_call_time":301,"average_response_time":301,"requests_per_minute":1700,"call_count":8496,"min_call_time":0.99,"max_call_time":4790,"total_call_time":2560000,"throughput":28.3,"standard_deviation":261}},{"from":"2020-03-09T08:14:00+00:00","to":"2020-03-09T08:19:00+00:00","values":{"average_call_time":312,"average_response_time":312,"requests_per_minute":1640,"call_count":8182,"min_call_time":1.15,"max_call_time":22600,"total_call_time":2560000,"throughput":27.3,"standard_deviation":366}},{"from":"2020-03-09T08:19:00+00:00","to":"2020-03-09T08:24:00+00:00","values":{"average_call_time":307,"average_response_time":307,"requests_per_minute":1850,"call_count":9238,"min_call_time":1.07,"max_call_time":2760,"total_call_time":2830000,"throughput":30.8,"standard_deviation":267}},{"from":"2020-03-09T08:24:00+00:00","to":"2020-03-09T08:29:00+00:00","values":{"average_call_time":289,"average_response_time":289,"requests_per_minute":2000,"call_count":9991,"min_call_time":1.17,"max_call_time":3050,"total_call_time":2890000,"throughput":33.3,"standard_deviation":259}},{"from":"2020-03-09T08:29:00+00:00","to":"2020-03-09T08:34:00+00:00","values":{"average_call_time":298,"average_response_time":298,"requests_per_minute":1950,"call_count":9736,"min_call_time":1.09,"max_call_time":3520,"total_call_time":2900000,"throughput":32.5,"standard_deviation":260}},{"from":"2020-03-09T08:34:00+00:00","to":"2020-03-09T08:39:00+00:00","values":{"average_call_time":328,"average_response_time":328,"requests_per_minute":1800,"call_count":8991,"min_call_time":1.11,"max_call_time":6730,"total_call_time":2950000,"throughput":30.0,"standard_deviation":309}},{"from":"2020-03-09T08:39:00+00:00","to":"2020-03-09T08:44:00+00:00","values":{"average_call_time":328,"average_response_time":328,"requests_per_minute":1790,"call_count":8951,"min_call_time":1.15,"max_call_time":3220,"total_call_time":2930000,"throughput":29.8,"standard_deviation":312}},{"from":"2020-03-09T08:44:00+00:00","to":"2020-03-09T08:49:00+00:00","values":{"average_call_time":350,"average_response_time":350,"requests_per_minute":1800,"call_count":9023,"min_call_time":1.12,"max_call_time":7400,"total_call_time":3160000,"throughput":30.1,"standard_deviation":334}},{"from":"2020-03-09T08:49:00+00:00","to":"2020-03-09T08:54:00+00:00","values":{"average_call_time":317,"average_response_time":317,"requests_per_minute":1910,"call_count":9575,"min_call_time":1.18,"max_call_time":3770,"total_call_time":3040000,"throughput":31.9,"standard_deviation":303}},{"from":"2020-03-09T08:54:00+00:00","to":"2020-03-09T08:59:00+00:00","values":{"average_call_time":338,"average_response_time":338,"requests_per_minute":1770,"call_count":8845,"min_call_time":1.11,"max_call_time":3560,"total_call_time":2990000,"throughput":29.5,"standard_deviation":306}},{"from":"2020-03-09T08:59:00+00:00","to":"2020-03-09T09:04:00+00:00","values":{"average_call_time":348,"average_response_time":348,"requests_per_minute":1770,"call_count":8858,"min_call_time":0.943,"max_call_time":6090,"total_call_time":3080000,"throughput":29.5,"standard_deviation":333}},{"from":"2020-03-09T09:04:00+00:00","to":"2020-03-09T09:09:00+00:00","values":{"average_call_time":343,"average_response_time":343,"requests_per_minute":1790,"call_count":8933,"min_call_time":1.15,"max_call_time":3380,"total_call_time":3070000,"throughput":29.8,"standard_deviation":306}},{"from":"2020-03-09T09:09:00+00:00","to":"2020-03-09T09:14:00+00:00","values":{"average_call_time":336,"average_response_time":336,"requests_per_minute":2280,"call_count":11423,"min_call_time":1.12,"max_call_time":4860,"total_call_time":3840000,"throughput":38.1,"standard_deviation":284}},{"from":"2020-03-09T09:14:00+00:00","to":"2020-03-09T09:19:00+00:00","values":{"average_call_time":345,"average_response_time":345,"requests_per_minute":2330,"call_count":11651,"min_call_time":1.12,"max_call_time":43300,"total_call_time":4020000,"throughput":38.8,"standard_deviation":499}},{"from":"2020-03-09T09:19:00+00:00","to":"2020-03-09T09:24:00+00:00","values":{"average_call_time":331,"average_response_time":331,"requests_per_minute":2320,"call_count":11582,"min_call_time":1.09,"max_call_time":6520,"total_call_time":3830000,"throughput":38.6,"standard_deviation":285}},{"from":"2020-03-09T09:24:00+00:00","to":"2020-03-09T09:29:00+00:00","values":{"average_call_time":336,"average_response_time":336,"requests_per_minute":2380,"call_count":11915,"min_call_time":0.989,"max_call_time":14400,"total_call_time":4000000,"throughput":39.7,"standard_deviation":305}},{"from":"2020-03-09T09:29:00+00:00","to":"2020-03-09T09:34:00+00:00","values":{"average_call_time":322,"average_response_time":322,"requests_per_minute":2010,"call_count":10070,"min_call_time":1.15,"max_call_time":20100,"total_call_time":3240000,"throughput":33.6,"standard_deviation":364}},{"from":"2020-03-09T09:34:00+00:00","to":"2020-03-09T09:39:00+00:00","values":{"average_call_time":339,"average_response_time":339,"requests_per_minute":2210,"call_count":11048,"min_call_time":1.15,"max_call_time":5340,"total_call_time":3740000,"throughput":36.8,"standard_deviation":293}},{"from":"2020-03-09T09:39:00+00:00","to":"2020-03-09T09:44:00+00:00","values":{"average_call_time":334,"average_response_time":334,"requests_per_minute":2350,"call_count":11736,"min_call_time":1.17,"max_call_time":5790,"total_call_time":3920000,"throughput":39.1,"standard_deviation":293}},{"from":"2020-03-09T09:44:00+00:00","to":"2020-03-09T09:49:00+00:00","values":{"average_call_time":344,"average_response_time":344,"requests_per_minute":1890,"call_count":9450,"min_call_time":0.994,"max_call_time":3700,"total_call_time":3250000,"throughput":31.5,"standard_deviation":306}},{"from":"2020-03-09T09:49:00+00:00","to":"2020-03-09T09:54:00+00:00","values":{"average_call_time":355,"average_response_time":355,"requests_per_minute":1880,"call_count":9406,"min_call_time":1.14,"max_call_time":5010,"total_call_time":3340000,"throughput":31.4,"standard_deviation":322}},{"from":"2020-03-09T09:54:00+00:00","to":"2020-03-09T09:59:00+00:00","values":{"average_call_time":339,"average_response_time":339,"requests_per_minute":1910,"call_count":9540,"min_call_time":1.13,"max_call_time":3190,"total_call_time":3230000,"throughput":31.8,"standard_deviation":302}},{"from":"2020-03-09T09:59:00+00:00","to":"2020-03-09T10:04:00+00:00","values":{"average_call_time":313,"average_response_time":313,"requests_per_minute":1770,"call_count":8834,"min_call_time":1.04,"max_call_time":4060,"total_call_time":2770000,"throughput":29.4,"standard_deviation":279}},{"from":"2020-03-09T10:04:00+00:00","to":"2020-03-09T10:09:00+00:00","values":{"average_call_time":331,"average_response_time":331,"requests_per_minute":1800,"call_count":8979,"min_call_time":1.17,"max_call_time":4960,"total_call_time":2970000,"throughput":29.9,"standard_deviation":301}},{"from":"2020-03-09T10:09:00+00:00","to":"2020-03-09T10:14:00+00:00","values":{"average_call_time":335,"average_response_time":335,"requests_per_minute":1960,"call_count":9778,"min_call_time":1.07,"max_call_time":30700,"total_call_time":3270000,"throughput":32.6,"standard_deviation":441}},{"from":"2020-03-09T10:14:00+00:00","to":"2020-03-09T10:19:00+00:00","values":{"average_call_time":355,"average_response_time":355,"requests_per_minute":1940,"call_count":9687,"min_call_time":1.07,"max_call_time":40100,"total_call_time":3440000,"throughput":32.3,"standard_deviation":669}},{"from":"2020-03-09T10:19:00+00:00","to":"2020-03-09T10:24:00+00:00","values":{"average_call_time":347,"average_response_time":347,"requests_per_minute":1950,"call_count":9769,"min_call_time":1.15,"max_call_time":40100,"total_call_time":3390000,"throughput":32.6,"standard_deviation":883}},{"from":"2020-03-09T10:24:00+00:00","to":"2020-03-09T10:29:00+00:00","values":{"average_call_time":343,"average_response_time":343,"requests_per_minute":2330,"call_count":11644,"min_call_time":1.13,"max_call_time":40100,"total_call_time":4000000,"throughput":38.8,"standard_deviation":642}},{"from":"2020-03-09T10:29:00+00:00","to":"2020-03-09T10:34:00+00:00","values":{"average_call_time":340,"average_response_time":340,"requests_per_minute":2450,"call_count":12263,"min_call_time":1.06,"max_call_time":4790,"total_call_time":4170000,"throughput":40.9,"standard_deviation":290}},{"from":"2020-03-09T10:34:00+00:00","to":"2020-03-09T10:39:00+00:00","values":{"average_call_time":339,"average_response_time":339,"requests_per_minute":2350,"call_count":11741,"min_call_time":1.22,"max_call_time":4600,"total_call_time":3990000,"throughput":39.1,"standard_deviation":292}},{"from":"2020-03-09T10:39:00+00:00","to":"2020-03-09T10:44:00+00:00","values":{"average_call_time":341,"average_response_time":341,"requests_per_minute":2300,"call_count":11480,"min_call_time":1.18,"max_call_time":5980,"total_call_time":3920000,"throughput":38.3,"standard_deviation":303}},{"from":"2020-03-09T10:44:00+00:00","to":"2020-03-09T10:49:00+00:00","values":{"average_call_time":352,"average_response_time":352,"requests_per_minute":1890,"call_count":9445,"min_call_time":0.97,"max_call_time":11200,"total_call_time":3320000,"throughput":31.5,"standard_deviation":337}},{"from":"2020-03-09T10:49:00+00:00","to":"2020-03-09T10:54:00+00:00","values":{"average_call_time":348,"average_response_time":348,"requests_per_minute":1800,"call_count":9016,"min_call_time":1.07,"max_call_time":3300,"total_call_time":3140000,"throughput":30.1,"standard_deviation":308}},{"from":"2020-03-09T10:54:00+00:00","to":"2020-03-09T10:59:00+00:00","values":{"average_call_time":355,"average_response_time":355,"requests_per_minute":1820,"call_count":9101,"min_call_time":1.14,"max_call_time":6940,"total_call_time":3230000,"throughput":30.3,"standard_deviation":328}},{"from":"2020-03-09T10:59:00+00:00","to":"2020-03-09T11:04:00+00:00","values":{"average_call_time":354,"average_response_time":354,"requests_per_minute":1710,"call_count":8527,"min_call_time":1.11,"max_call_time":3730,"total_call_time":3020000,"throughput":28.4,"standard_deviation":311}},{"from":"2020-03-09T11:04:00+00:00","to":"2020-03-09T11:09:00+00:00","values":{"average_call_time":349,"average_response_time":349,"requests_per_minute":1830,"call_count":9131,"min_call_time":1.17,"max_call_time":3470,"total_call_time":3180000,"throughput":30.4,"standard_deviation":301}},{"from":"2020-03-09T11:09:00+00:00","to":"2020-03-09T11:14:00+00:00","values":{"average_call_time":351,"average_response_time":351,"requests_per_minute":1980,"call_count":9916,"min_call_time":1.05,"max_call_time":4730,"total_call_time":3480000,"throughput":33.1,"standard_deviation":307}},{"from":"2020-03-09T11:14:00+00:00","to":"2020-03-09T11:19:00+00:00","values":{"average_call_time":339,"average_response_time":339,"requests_per_minute":1780,"call_count":8913,"min_call_time":0.978,"max_call_time":13600,"total_call_time":3020000,"throughput":29.7,"standard_deviation":341}},{"from":"2020-03-09T11:19:00+00:00","to":"2020-03-09T11:24:00+00:00","values":{"average_call_time":345,"average_response_time":345,"requests_per_minute":1870,"call_count":9333,"min_call_time":1.12,"max_call_time":3360,"total_call_time":3220000,"throughput":31.1,"standard_deviation":297}},{"from":"2020-03-09T11:24:00+00:00","to":"2020-03-09T11:29:00+00:00","values":{"average_call_time":352,"average_response_time":352,"requests_per_minute":1920,"call_count":9616,"min_call_time":1.07,"max_call_time":10900,"total_call_time":3380000,"throughput":32.1,"standard_deviation":327}},{"from":"2020-03-09T11:29:00+00:00","to":"2020-03-09T11:34:00+00:00","values":{"average_call_time":350,"average_response_time":350,"requests_per_minute":1880,"call_count":9425,"min_call_time":1.09,"max_call_time":3910,"total_call_time":3300000,"throughput":31.4,"standard_deviation":307}},{"from":"2020-03-09T11:34:00+00:00","to":"2020-03-09T11:39:00+00:00","values":{"average_call_time":320,"average_response_time":320,"requests_per_minute":1890,"call_count":9447,"min_call_time":1.17,"max_call_time":4790,"total_call_time":3020000,"throughput":31.5,"standard_deviation":293}},{"from":"2020-03-09T11:39:00+00:00","to":"2020-03-09T11:44:00+00:00","values":{"average_call_time":337,"average_response_time":337,"requests_per_minute":1810,"call_count":9055,"min_call_time":1.13,"max_call_time":4760,"total_call_time":3050000,"throughput":30.2,"standard_deviation":298}},{"from":"2020-03-09T11:44:00+00:00","to":"2020-03-09T11:49:00+00:00","values":{"average_call_time":335,"average_response_time":335,"requests_per_minute":1910,"call_count":9537,"min_call_time":1.08,"max_call_time":14600,"total_call_time":3200000,"throughput":31.8,"standard_deviation":341}}]},{"name":"Errors/all","timeslices":[{"from":"2020-03-09T00:04:00+00:00","to":"2020-03-09T00:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:09:00+00:00","to":"2020-03-09T00:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:14:00+00:00","to":"2020-03-09T00:19:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:19:00+00:00","to":"2020-03-09T00:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:24:00+00:00","to":"2020-03-09T00:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:29:00+00:00","to":"2020-03-09T00:34:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:34:00+00:00","to":"2020-03-09T00:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:39:00+00:00","to":"2020-03-09T00:44:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:44:00+00:00","to":"2020-03-09T00:49:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:49:00+00:00","to":"2020-03-09T00:54:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:54:00+00:00","to":"2020-03-09T00:59:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T00:59:00+00:00","to":"2020-03-09T01:04:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:04:00+00:00","to":"2020-03-09T01:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:09:00+00:00","to":"2020-03-09T01:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:14:00+00:00","to":"2020-03-09T01:19:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:19:00+00:00","to":"2020-03-09T01:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:24:00+00:00","to":"2020-03-09T01:29:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T01:29:00+00:00","to":"2020-03-09T01:34:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:34:00+00:00","to":"2020-03-09T01:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:39:00+00:00","to":"2020-03-09T01:44:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:44:00+00:00","to":"2020-03-09T01:49:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:49:00+00:00","to":"2020-03-09T01:54:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:54:00+00:00","to":"2020-03-09T01:59:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T01:59:00+00:00","to":"2020-03-09T02:04:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:04:00+00:00","to":"2020-03-09T02:09:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T02:09:00+00:00","to":"2020-03-09T02:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:14:00+00:00","to":"2020-03-09T02:19:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T02:19:00+00:00","to":"2020-03-09T02:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:24:00+00:00","to":"2020-03-09T02:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:29:00+00:00","to":"2020-03-09T02:34:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:34:00+00:00","to":"2020-03-09T02:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:39:00+00:00","to":"2020-03-09T02:44:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:44:00+00:00","to":"2020-03-09T02:49:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T02:49:00+00:00","to":"2020-03-09T02:54:00+00:00","values":{"errors_per_minute":0.0467,"error_count":0}},{"from":"2020-03-09T02:54:00+00:00","to":"2020-03-09T02:59:00+00:00","values":{"errors_per_minute":0.753,"error_count":4}},{"from":"2020-03-09T02:59:00+00:00","to":"2020-03-09T03:04:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:04:00+00:00","to":"2020-03-09T03:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:09:00+00:00","to":"2020-03-09T03:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:14:00+00:00","to":"2020-03-09T03:19:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T03:19:00+00:00","to":"2020-03-09T03:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:24:00+00:00","to":"2020-03-09T03:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:29:00+00:00","to":"2020-03-09T03:34:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:34:00+00:00","to":"2020-03-09T03:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:39:00+00:00","to":"2020-03-09T03:44:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:44:00+00:00","to":"2020-03-09T03:49:00+00:00","values":{"errors_per_minute":0.6,"error_count":3}},{"from":"2020-03-09T03:49:00+00:00","to":"2020-03-09T03:54:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:54:00+00:00","to":"2020-03-09T03:59:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T03:59:00+00:00","to":"2020-03-09T04:04:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:04:00+00:00","to":"2020-03-09T04:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:09:00+00:00","to":"2020-03-09T04:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:14:00+00:00","to":"2020-03-09T04:19:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:19:00+00:00","to":"2020-03-09T04:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:24:00+00:00","to":"2020-03-09T04:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:29:00+00:00","to":"2020-03-09T04:34:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:34:00+00:00","to":"2020-03-09T04:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:39:00+00:00","to":"2020-03-09T04:44:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:44:00+00:00","to":"2020-03-09T04:49:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T04:49:00+00:00","to":"2020-03-09T04:54:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T04:54:00+00:00","to":"2020-03-09T04:59:00+00:00","values":{"errors_per_minute":0.887,"error_count":4}},{"from":"2020-03-09T04:59:00+00:00","to":"2020-03-09T05:04:00+00:00","values":{"errors_per_minute":0.313,"error_count":2}},{"from":"2020-03-09T05:04:00+00:00","to":"2020-03-09T05:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T05:09:00+00:00","to":"2020-03-09T05:14:00+00:00","values":{"errors_per_minute":0.216,"error_count":1}},{"from":"2020-03-09T05:14:00+00:00","to":"2020-03-09T05:19:00+00:00","values":{"errors_per_minute":0.384,"error_count":2}},{"from":"2020-03-09T05:19:00+00:00","to":"2020-03-09T05:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T05:24:00+00:00","to":"2020-03-09T05:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T05:29:00+00:00","to":"2020-03-09T05:34:00+00:00","values":{"errors_per_minute":0.817,"error_count":4}},{"from":"2020-03-09T05:34:00+00:00","to":"2020-03-09T05:39:00+00:00","values":{"errors_per_minute":0.47,"error_count":2}},{"from":"2020-03-09T05:39:00+00:00","to":"2020-03-09T05:44:00+00:00","values":{"errors_per_minute":0.713,"error_count":4}},{"from":"2020-03-09T05:44:00+00:00","to":"2020-03-09T05:49:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T05:49:00+00:00","to":"2020-03-09T05:54:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T05:54:00+00:00","to":"2020-03-09T05:59:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T05:59:00+00:00","to":"2020-03-09T06:04:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T06:04:00+00:00","to":"2020-03-09T06:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:09:00+00:00","to":"2020-03-09T06:14:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:14:00+00:00","to":"2020-03-09T06:19:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T06:19:00+00:00","to":"2020-03-09T06:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:24:00+00:00","to":"2020-03-09T06:29:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:29:00+00:00","to":"2020-03-09T06:34:00+00:00","values":{"errors_per_minute":0.6,"error_count":3}},{"from":"2020-03-09T06:34:00+00:00","to":"2020-03-09T06:39:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:39:00+00:00","to":"2020-03-09T06:44:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T06:44:00+00:00","to":"2020-03-09T06:49:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:49:00+00:00","to":"2020-03-09T06:54:00+00:00","values":{"errors_per_minute":0.6,"error_count":3}},{"from":"2020-03-09T06:54:00+00:00","to":"2020-03-09T06:59:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T06:59:00+00:00","to":"2020-03-09T07:04:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T07:04:00+00:00","to":"2020-03-09T07:09:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T07:09:00+00:00","to":"2020-03-09T07:14:00+00:00","values":{"errors_per_minute":1.6,"error_count":8}},{"from":"2020-03-09T07:14:00+00:00","to":"2020-03-09T07:19:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T07:19:00+00:00","to":"2020-03-09T07:24:00+00:00","values":{"errors_per_minute":0.6,"error_count":3}},{"from":"2020-03-09T07:24:00+00:00","to":"2020-03-09T07:29:00+00:00","values":{"errors_per_minute":0.561,"error_count":3}},{"from":"2020-03-09T07:29:00+00:00","to":"2020-03-09T07:34:00+00:00","values":{"errors_per_minute":0.839,"error_count":4}},{"from":"2020-03-09T07:34:00+00:00","to":"2020-03-09T07:39:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T07:39:00+00:00","to":"2020-03-09T07:44:00+00:00","values":{"errors_per_minute":0.8,"error_count":4}},{"from":"2020-03-09T07:44:00+00:00","to":"2020-03-09T07:49:00+00:00","values":{"errors_per_minute":0.8,"error_count":4}},{"from":"2020-03-09T07:49:00+00:00","to":"2020-03-09T07:54:00+00:00","values":{"errors_per_minute":0.287,"error_count":1}},{"from":"2020-03-09T07:54:00+00:00","to":"2020-03-09T07:59:00+00:00","values":{"errors_per_minute":0.713,"error_count":4}},{"from":"2020-03-09T07:59:00+00:00","to":"2020-03-09T08:04:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T08:04:00+00:00","to":"2020-03-09T08:09:00+00:00","values":{"errors_per_minute":0.247,"error_count":1}},{"from":"2020-03-09T08:09:00+00:00","to":"2020-03-09T08:14:00+00:00","values":{"errors_per_minute":1.15,"error_count":6}},{"from":"2020-03-09T08:14:00+00:00","to":"2020-03-09T08:19:00+00:00","values":{"errors_per_minute":1.2,"error_count":6}},{"from":"2020-03-09T08:19:00+00:00","to":"2020-03-09T08:24:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T08:24:00+00:00","to":"2020-03-09T08:29:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T08:29:00+00:00","to":"2020-03-09T08:34:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T08:34:00+00:00","to":"2020-03-09T08:39:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T08:39:00+00:00","to":"2020-03-09T08:44:00+00:00","values":{"errors_per_minute":0.6,"error_count":3}},{"from":"2020-03-09T08:44:00+00:00","to":"2020-03-09T08:49:00+00:00","values":{"errors_per_minute":2.0,"error_count":10}},{"from":"2020-03-09T08:49:00+00:00","to":"2020-03-09T08:54:00+00:00","values":{"errors_per_minute":2.8,"error_count":14}},{"from":"2020-03-09T08:54:00+00:00","to":"2020-03-09T08:59:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T08:59:00+00:00","to":"2020-03-09T09:04:00+00:00","values":{"errors_per_minute":1.14,"error_count":6}},{"from":"2020-03-09T09:04:00+00:00","to":"2020-03-09T09:09:00+00:00","values":{"errors_per_minute":0.856,"error_count":4}},{"from":"2020-03-09T09:09:00+00:00","to":"2020-03-09T09:14:00+00:00","values":{"errors_per_minute":0.761,"error_count":4}},{"from":"2020-03-09T09:14:00+00:00","to":"2020-03-09T09:19:00+00:00","values":{"errors_per_minute":4.04,"error_count":20}},{"from":"2020-03-09T09:19:00+00:00","to":"2020-03-09T09:24:00+00:00","values":{"errors_per_minute":1.77,"error_count":9}},{"from":"2020-03-09T09:24:00+00:00","to":"2020-03-09T09:29:00+00:00","values":{"errors_per_minute":0.827,"error_count":4}},{"from":"2020-03-09T09:29:00+00:00","to":"2020-03-09T09:34:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T09:34:00+00:00","to":"2020-03-09T09:39:00+00:00","values":{"errors_per_minute":0.373,"error_count":2}},{"from":"2020-03-09T09:39:00+00:00","to":"2020-03-09T09:44:00+00:00","values":{"errors_per_minute":1.43,"error_count":7}},{"from":"2020-03-09T09:44:00+00:00","to":"2020-03-09T09:49:00+00:00","values":{"errors_per_minute":0.487,"error_count":2}},{"from":"2020-03-09T09:49:00+00:00","to":"2020-03-09T09:54:00+00:00","values":{"errors_per_minute":0.513,"error_count":3}},{"from":"2020-03-09T09:54:00+00:00","to":"2020-03-09T09:59:00+00:00","values":{"errors_per_minute":0,"error_count":0}},{"from":"2020-03-09T09:59:00+00:00","to":"2020-03-09T10:04:00+00:00","values":{"errors_per_minute":0.447,"error_count":2}},{"from":"2020-03-09T10:04:00+00:00","to":"2020-03-09T10:09:00+00:00","values":{"errors_per_minute":1.75,"error_count":9}},{"from":"2020-03-09T10:09:00+00:00","to":"2020-03-09T10:14:00+00:00","values":{"errors_per_minute":0.173,"error_count":1}},{"from":"2020-03-09T10:14:00+00:00","to":"2020-03-09T10:19:00+00:00","values":{"errors_per_minute":0.713,"error_count":4}},{"from":"2020-03-09T10:19:00+00:00","to":"2020-03-09T10:24:00+00:00","values":{"errors_per_minute":2.16,"error_count":11}},{"from":"2020-03-09T10:24:00+00:00","to":"2020-03-09T10:29:00+00:00","values":{"errors_per_minute":1.4,"error_count":7}},{"from":"2020-03-09T10:29:00+00:00","to":"2020-03-09T10:34:00+00:00","values":{"errors_per_minute":1.44,"error_count":7}},{"from":"2020-03-09T10:34:00+00:00","to":"2020-03-09T10:39:00+00:00","values":{"errors_per_minute":0.56,"error_count":3}},{"from":"2020-03-09T10:39:00+00:00","to":"2020-03-09T10:44:00+00:00","values":{"errors_per_minute":0.953,"error_count":5}},{"from":"2020-03-09T10:44:00+00:00","to":"2020-03-09T10:49:00+00:00","values":{"errors_per_minute":1.05,"error_count":5}},{"from":"2020-03-09T10:49:00+00:00","to":"2020-03-09T10:54:00+00:00","values":{"errors_per_minute":1.15,"error_count":6}},{"from":"2020-03-09T10:54:00+00:00","to":"2020-03-09T10:59:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T10:59:00+00:00","to":"2020-03-09T11:04:00+00:00","values":{"errors_per_minute":0.287,"error_count":1}},{"from":"2020-03-09T11:04:00+00:00","to":"2020-03-09T11:09:00+00:00","values":{"errors_per_minute":0.513,"error_count":3}},{"from":"2020-03-09T11:09:00+00:00","to":"2020-03-09T11:14:00+00:00","values":{"errors_per_minute":0.744,"error_count":4}},{"from":"2020-03-09T11:14:00+00:00","to":"2020-03-09T11:19:00+00:00","values":{"errors_per_minute":0.856,"error_count":4}},{"from":"2020-03-09T11:19:00+00:00","to":"2020-03-09T11:24:00+00:00","values":{"errors_per_minute":0.2,"error_count":1}},{"from":"2020-03-09T11:24:00+00:00","to":"2020-03-09T11:29:00+00:00","values":{"errors_per_minute":1.0,"error_count":5}},{"from":"2020-03-09T11:29:00+00:00","to":"2020-03-09T11:34:00+00:00","values":{"errors_per_minute":0.4,"error_count":2}},{"from":"2020-03-09T11:34:00+00:00","to":"2020-03-09T11:39:00+00:00","values":{"errors_per_minute":0.887,"error_count":4}},{"from":"2020-03-09T11:39:00+00:00","to":"2020-03-09T11:44:00+00:00","values":{"errors_per_minute":0.56,"error_count":3}},{"from":"2020-03-09T11:44:00+00:00","to":"2020-03-09T11:49:00+00:00","values":{"errors_per_minute":0.353,"error_count":2}}]}]}}'
end

def newrelic()
  #data = newrelic_request
  json = newrelic_debug
  transactions = json['metric_data']['metrics'][0]['timeslices']
  errors = json['metric_data']['metrics'][1]['timeslices']

  errors_count = {}
  errors.each { |d| errors_count[d['from']] = d['values']['error_count'] }

  data = []

  transactions.each do |d|
    calls = d['values']['call_count']
    errors = errors_count[d['from']]
    data.append([
                    Time.parse(d['from']).to_i,
                    (errors / calls.to_f * 1000).to_f
                ])
  end
  data
end

class Reports
  include Aws::Record
  string_attr :name
  integer_attr :timestamp
  float_attr :value
end

def write(name, data)

  dynamodb = Aws::DynamoDB::Client.new
  table_name = 'Reports'

  data.each do |d|
    item = {
        Name: name,
        Timestamp: d[0],
        Value: d[1]
    }

    params = {
        table_name: table_name,
        item: item
    }
    begin
      dynamodb.put_item(params)
      puts "Added item  #{d[0]}"

    rescue Aws::DynamoDB::Errors::ServiceError => error
      puts 'Unable to add item:'
      puts "#{error.message}"
    end
  end
end

def lambda_handler(event:, context:)
  data = newrelic

  puts write('nr_error_rate_lambda', data)
  { statusCode: 200, body: JSON.generate('Data written') }
end

